{
    "id": "34B3194A-2F58-4844-A8C3-655CC2802E84",
    "name": "DeployReadyRollDatabase",
    "friendlyName": "Deploy ReadyRoll Database Package",
    "description": "Deploy a database package built by ReadyRoll",
    "helpMarkDown": "[More Information](http://www.red-gate.com/products/sql-development/readyroll/)",
    "category": "Deploy",
    "visibility": [
        "Release"
    ],
    "author": "Redgate Software",
    "version": {
        "Major": 0,
        "Minor": 6,
        "Patch": 7
    },
    "minimumAgentVersion": "1.91.0",
    "instanceNameFormat": "Deploy to $(DatabaseServer)",
    "inputs": [
        {
            "name": "PackagePath",
            "type": "filePath",
            "label": "Package to deploy",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Path of the ps1 script contained in the build artifact.  This should be a fully qualified path or relative to the default working directory."
        },
        {
            "name": "ReleaseVersion",
            "type": "string",
            "label": "Release version",
            "defaultValue": "$(Release.Releaseid)",
            "required": false,
            "helpMarkDown": "Release number to store against deployed migrations within the [dbo].[__MigrationLog] table."
        },
        {
            "name": "DatabaseServer",
            "type": "string",
            "label": "Target SQL Server instance",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "The fully qualified SQL Server instance name for the target database."
        },
        {
            "name": "DatabaseName",
            "type": "string",
            "label": "Target database name",
            "defaultValue": "",
            "helpMarkDown": "Optional.  The name of the database to deploy to.  ReadyRoll will create a new database if it does not exist.",
            "required": false
        },
        {
            "name": "UseWindowsAuth",
            "type": "boolean",
            "label": "Use Windows authentication",
            "defaultValue": "false",
            "helpMarkDown": "If you check this field, Windows authentication will be used to connect, using the account that runs the agent.  Otherwise, SQL Server authentication will be used and you will need to specify a username and password below.",
            "required": false
        },
        {
            "name": "DatabaseUserName",
            "type": "string",
            "label": "Database username",
            "defaultValue": "",
            "visibleRule": "UseWindowsAuth = false",
            "helpMarkDown": "The SQL Server username used to connect to the database.",
            "required": false
        },
        {
            "name": "DatabasePassword",
            "type": "string",
            "label": "Database password",
            "defaultValue": "",
            "visibleRule": "UseWindowsAuth = false",
            "helpMarkDown": "The SQL Server password used to connect to the database.",
            "required": false
        }
    ],
    "execution": {
        "PowerShell": {
            "target": "$(currentDirectory)\\DeployReadyRollDatabaseTask.ps1",
            "argumentFormat": "",
            "workingDirectory": "$(currentDirectory)"
        }
    }
}
