{
    "id": "9e3e2353-692f-4804-9fc1-8a3bca551511",
    "name": "BuildVersioning",
    "friendlyName": "Build Versioning",
    "description": "Task to version build artifacts.",
    "helpMarkDown": "[More Information](http://www.4tecture.ch)",
    "category": "Build",
    "visibility": [
        "Build"
    ],
    "author": "",
    "version": {
        "Major": 0,
        "Minor": 1,
        "Patch": 23
    },
    "demands": [],
    "inputs": [
        {
            "name": "sourcePath",
            "type": "filePath",
            "label": "Source Path",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "Path in which to search for version files (like AssemblyInfo.* files). Leave empty to use the sources directory. NOTE: this is case sensitive for non-Windows systems."
        },
        {
            "name": "versionSource",
            "type": "pickList",
            "label": "Version Source",
            "defaultValue": "buildNumber",
            "options": {
                "buildNumber": "Build Number",
                "variable": "Variable",
                "gitversion": "GitVersion"
            },
            "required": true,
            "helpMarkDown": "The source for the version number. Defaults to the build number, but can be a build variable."
        },
        {
            "name": "customNumberVariable",
            "type": "string",
            "label": "Variable to use",
            "defaultValue": "myBuildNumber",
            "required": false,
            "helpMarkDown": "Variable to use for the version number. Do not specify $() - just enter the name.",
            "visibleRule": "versionSource=variable"
        },
        {
            "name": "versionFormat",
            "type": "pickList",
            "label": "Version Extract Pattern",
            "defaultValue": "fourParts",
            "options": {
                "fourParts": "X.X.X.X",
                "threeParts": "X.X.X",
                "custom": "Custom Regex"
            },
            "required": true,
            "helpMarkDown": "Pattern to use to extract the build number as well as default replacement pattern.",
            "visibleRule": "versionSource=buildNumber"
        },
        {
            "name": "customBuildRegex",
            "type": "string",
            "label": "Custom Regex Find Pattern",
            "defaultValue": "\\d+\\.\\d+\\.\\d+\\.\\d+",
            "required": false,
            "helpMarkDown": "Regular Expression to extract version from build number. This is also the default replace regex (unless otherwise specified in Advanced settings).",
            "visibleRule": "versionFormat=custom"
        },
        {
            "name": "buildRegexIndex",
            "type": "string",
            "label": "Build Regex Group Index",
            "defaultValue": "0",
            "required": false,
            "helpMarkDown": "Index of group in build regular expression that you want to use as the version number. Leave as 0 if you have no groups.",
            "visibleRule": "versionFormat=custom"
        },
        {
            "name": "buildNumberAction",
            "type": "pickList",
            "label": "Build Number",
            "defaultValue": "nothing",
            "options": {
                "nothing": "Do nothing",
                "append": "Append",
                "replace": "Replace"
            },
            "required": true,
            "helpMarkDown": "Pattern to use to extract the build number as well as default replacement pattern."
        },
        {
            "name": "doReplaceAssemblyInfo",
            "type": "boolean",
            "label": "Do replace in AssemblyInfo files.",
            "defaultValue": "false",
            "required": true,
            "helpMarkDown": "Check this option if you want to replace the version definition in Assembly Info files."
        },
        {
            "name": "filePatternAssemblyInfo",
            "type": "string",
            "label": "File Pattern",
            "defaultValue": "**\\AssemblyInfo.*",
            "required": true,
            "helpMarkDown": "File filter to replace version info.",
            "visibleRule":"doReplaceAssemblyInfo=true"
        },
        {
            "name": "paramAssemblyInfoDigitsAssemblyVersion",
            "type": "pickList",
            "label": "Digits used for Assembly Version",
            "defaultValue": "4",
            "options": {
                "1": "1.0.0.0",
                "2": "1.2.0.0",
                "3": "1.2.3.0",
                "4": "1.2.3.4"
            },
            "required": true,
            "helpMarkDown": "Define how many digits will be used for the assembly version. Unused digits will be set to 0.",
            "visibleRule":"doReplaceAssemblyInfo=true"
        },
        {
            "name": "paramAssemblyInfoDigitsAssemblyFileVersion",
            "type": "pickList",
            "label": "Digits used for Assembly File Version",
            "defaultValue": "4",
            "options": {
                "1": "1.0.0.0",
                "2": "1.2.0.0",
                "3": "1.2.3.0",
                "4": "1.2.3.4"
            },
            "required": true,
            "helpMarkDown": "Define how many digits will be used for the assembly file version. Unused digits will be set to 0.",
            "visibleRule":"doReplaceAssemblyInfo=true"
        },
        {
            "name": "paramAssemblyInfoDigitsAssemblyInformationalVersion",
            "type": "pickList",
            "label": "Digits used for Assembly Informational Version",
            "defaultValue": "4",
            "options": {
                "1": "1.0.0.0",
                "2": "1.2.0.0",
                "3": "1.2.3.0",
                "4": "1.2.3.4"
            },
            "required": true,
            "helpMarkDown": "Define how many digits will be used for the assembly informational version. Unused digits will be set to 0.",
            "visibleRule":"doReplaceAssemblyInfo=true"
        },
        {
            "name": "paramAssemblyInfoDigitsAssemblyInformationalVersionSuffix",
            "type": "string",
            "label": "Suffix for Assembly Informational Version",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "Add a suffix after the version string for the assembly inforamtional version.",
            "visibleRule": "doReplaceAssemblyInfo=true"
        },
        {
            "name": "doReplaceNuspec",
            "type": "boolean",
            "label": "Do replace in Nuspec files.",
            "defaultValue": "false",
            "required": true,
            "helpMarkDown": "Check this option if you want to replace the version definition in Nuspec files."
        },
        {
            "name": "filePatternNuspec",
            "type": "string",
            "label": "File Pattern",
            "defaultValue": "**\\*.nuspec",
            "required": true,
            "helpMarkDown": "File filter to replace version info.",
            "visibleRule":"doReplaceNuspec=true"
        },
        {
            "name": "doReplaceDotNetCore",
            "type": "boolean",
            "label": "Do replace in .NET Core project files.",
            "defaultValue": "false",
            "required": true,
            "helpMarkDown": "Check this option if you want to replace the version definition in .NET Core project files."
        },
        {
            "name": "filePatternDotNetCore",
            "type": "string",
            "label": "File Pattern",
            "defaultValue": "**\\*.csproj",
            "required": true,
            "helpMarkDown": "File filter to replace version info.",
            "visibleRule":"doReplaceDotNetCore=true"
        },
        {
            "name": "doReplaceAndroid",
            "type": "boolean",
            "label": "Do replace in Android project files.",
            "defaultValue": "false",
            "required": true,
            "helpMarkDown": "Check this option if you want to replace the version definition in Android project files."
        },
        {
            "name": "filePatternAndroid",
            "type": "string",
            "label": "File Pattern",
            "defaultValue": "**\\AndroidManifest.xml",
            "required": true,
            "helpMarkDown": "File filter to replace version info.",
            "visibleRule":"doReplaceAndroid=true"
        },
        {
            "name": "doReplaceiOS",
            "type": "boolean",
            "label": "Do replace in iOS project files.",
            "defaultValue": "false",
            "required": true,
            "helpMarkDown": "Check this option if you want to replace the version definition in iOS project files."
        },
        {
            "name": "filePatterniOS",
            "type": "string",
            "label": "File Pattern",
            "defaultValue": "**\\Info.plist",
            "required": true,
            "helpMarkDown": "File filter to replace version info.",
            "visibleRule":"doReplaceiOS=true"
        }
    ],
    "instanceNameFormat": "BuildVersioning",
    "execution": {
        "Node": {
            "target": "BuildVersioning.js"
        }
    }
}