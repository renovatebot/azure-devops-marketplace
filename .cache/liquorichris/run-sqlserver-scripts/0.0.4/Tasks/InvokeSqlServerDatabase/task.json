{
	"id": "e52a32de-e740-4343-a0c6-f80146ba6857",
	"name": "RunSQLServerScripts",
	"friendlyName": "Run SQL Server Database Scripts",
	"description": "Executes SQL Server database scripts using the DbaTools module commandline tool.",
	"author": "pwshliquori",
	"helpMarkDown": "Executes SQL Server database scripts using the DbaTools module commandline tool",
	"category": "Deploy",
	"visibility": [
		"Release"
	],
	"demands": ["Invoke-DbaQuery"],
	"version": {
        "Major": "0",
        "Minor": "0",
        "Patch": "4"
	},
	"groups": [
		{
			"name": "Options",
			"displayName": "SQLPlus Options",
			"isExpanded": false
		},
		{
			"name": "logOptions",
			"displayName": "Log Options",
			"isExpanded": false
		}
	],
	"instanceNameFormat": "Run SQL Server Database Scripts",
	"inputs": [
		{
			"name": "scriptPath",
			"type": "filePath",
			"label": "Script Path",
			"defaultValue": "$(System.DefaultWorkingDirectory)",
			"required": true,
			"helpMarkDown": "Path of the SQL Server scripts."
		},
		{
			"name": "databaseName",
			"type": "string",
			"label": "Database Name",
			"defaultValue": "",
			"required": true,
			"helpMarkDown": "Name of database for script to run on."	
		},
		{
			"name": "sqlInstance",
			"type": "string",
			"label": "SQL Instance",
			"required": true,
			"helpMarkDown": "SQL Server instance name"  
		},
		{
			"name": "user",
			"type": "string",
			"label": "User",
			"defaultValue": "",
			"required": true,
			"helpMarkDown": "User to connect to the SQL Server database."
		},
		{
			"name": "password",
			"type": "string",
			"label": "Password",
			"defaultValue": "",
			"required": true,
			"helpMarkDown": "Password to connect to the SQL Server database. It is recommended to store the password is a secured variable or upload a secure file."
		},
		{
			"name": "logPath",
			"type": "textbox",
			"label": "Log Path",
			"defaultValue": "",
			"required": false,
			"groupName": "logOptions",
			"helpMarkDown": "Path to save the log file after scripts have completed."
		},
		{
			"name": "copy",
			"type": "boolean",
			"label": "Copy sql files to log",
			"defaultValue": true,
			"required": false,
			"groupName": "logOptions",
			"helpMarkDown": "Copy .sql files to the log path."
		}
	],
	"execution": {
		"PowerShell3": {
			"target": "$(currentDirectory)/Invoke-SqlServerDatabase.ps1",
			"argumentFormat": "",
			"workingDirectory": "$(currentDirectory)"
		}
	}
}