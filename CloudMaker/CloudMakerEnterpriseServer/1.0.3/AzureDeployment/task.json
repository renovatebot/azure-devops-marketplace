{
  "id": "60b0c2bb-66cb-4284-9482-543cef6da436",
  "name": "CloudMakerEnterpriseServerAzureDeployment",
  "friendlyName": "Cloud Maker Enterprise Server - Azure Deployment",
  "description": "Deploys a Cloud Maker blueprint",
  "helpMarkDown": "",
  "category": "Deploy",
  "author": "Cloud Maker",
  "version": {
    "Major": 1,
    "Minor": 0,
    "Patch": 4
  },
  "instanceNameFormat": "Cloud Maker Enterprise Server - Azure Deployment",
  "inputs": [
    {
      "name": "ServiceConnection",
      "type": "connectedService:cloudmakerenterpriseserver",
      "label": "Service Connection",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "The Cloud Maker service connection to use for deployment."
    },
    {
      "name": "OrganisationId",
      "type": "pickList",
      "label": "Organisation",
      "required": true,
      "helpMarkDown": "The Cloud Maker organisation to use for deployment."
    },
    {
      "name": "PipelineId",
      "type": "pickList",
      "label": "Pipeline",
      "required": true,
      "helpMarkDown": "The Cloud Maker pipeline to deploy."
    },
    {
      "name": "StageId",
      "type": "pickList",
      "label": "Stage",
      "required": true,
      "helpMarkDown": "The Cloud Maker pipeline stage to deploy."
    },
    {
      "name": "ConnectedServiceName",
      "type": "connectedService:AzureRM",
      "label": "Azure Resource Manager connection",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "The Azure Resource Manager connection to use for deployment."
    },
    {
      "name": "MetadataLocation",
      "type": "pickList",
      "label": "Metadata location",
      "required": true,
      "helpMarkDown": "The location for deployment metadata.",
      "properties": {
        "EditableOptions": "True"
      }
    }
  ],
  "dataSourceBindings": [
    {
      "target": "MetadataLocation",
      "endpointId": "$(ConnectedServiceName)",
      "dataSourceName": "AzureLocationsByDeploymentScope",
      "parameters": {
        "deploymentScope": "Management Group"
      }
    },
    {
      "target": "OrganisationId",
      "endpointId": "$(ServiceConnection)",
      "dataSourceName": "Organisations",
      "resultTemplate": "{ \"Value\" : \"{{{id}}}\", \"DisplayValue\":\"{{{name}}}\"}"
    },
    {
      "target": "PipelineId",
      "endpointId": "$(ServiceConnection)",
      "dataSourceName": "Pipelines",
      "resultTemplate": "{ \"Value\" : \"{{{id}}}\", \"DisplayValue\":\"{{{name}}}\"}",
      "parameters": {
        "OrganisationId": "$(OrganisationId)"
      }
    },
    {
      "target": "StageId",
      "endpointId": "$(ServiceConnection)",
      "dataSourceName": "Stages",
      "resultTemplate": "{ \"Value\" : \"{{{id}}}\", \"DisplayValue\":\"{{{name}}}\"}",
      "parameters": {
        "PipelineId": "$(PipelineId)"
      }
    }
  ],
  "execution": {
    "Node10": {
      "target": "src/index.js"
    }
  }
}